# NVDA Cloud Sync: Technical Overview (v1.2)

## I. What This Does
NVDA Cloud Sync is a tool that lets you back up your entire NVDA setup—including your `userConfig`, voice settings, and all installed addons—to a private server. You can then pull it down to any other machine, making moving between computers painless. It’s built to avoid nuking your server credentials and ensures the addon itself never deletes itself mid-sync.  

---

## II. How It Works

### Push (Upload)
- The addon scans your `%AppData%\nvda` folder.  
- Copies everything to a temp folder to avoid “file in use” issues.  
- Zips it up (config + addons).  
- Sends the ZIP to your server.  

### Pull (Download)
- Downloads the latest ZIP for your selected slot.  
- Swaps files atomically to avoid corruption.  
- Keeps your server URL and token intact.  
- Restarts NVDA so changes take effect.  

### 2.1 The Server Side
- Built with **FastAPI**, runs headless.  
- Stores each backup as a single file per slot (Daily, Work, Manual, etc.).  
- Uses atomic writes so you never end up with half-uploaded files.  
- Configurable ports (default 8000) to avoid conflicts with other services.  

### 2.2 The Sync Engine
- Uses ZIP compression for fast transfers.  
- Pull operations include a delayed restart to ensure NVDA fully quits before overwriting files.  
- Supports large addons folders without crashing.  

---

## III. Security
- **Bearer Token** required for every transaction.  
- Tokens are generated by `setup_wizard.py`.  
- For WAN deployments, use a reverse proxy like Nginx for HTTPS—raw traffic is currently unencrypted.  

---

## IV. Getting Set Up
1. **Server:** Run `setup_wizard.py` to create the backup folder, generate a token, and pick a port.  
2. **Addon:** Build with `build_addon.py` to create a `.nvda-addon` package.  
3. **NVDA Settings:** Enter your server URL and security token in the Cloud Sync settings.  

---

## V. Important Disclaimer
- This software is **experimental**.  
- Use at your own risk. The author is **not responsible** for lost data, corrupted NVDA configurations, or system crashes.  
- Always keep a local backup before pulling from the cloud.  
- Syncing while NVDA is running is safe, but make sure critical work is saved.  
